{% extends 'base.html' %}
{% block content %}
<h2 class="mb-4">📝 My Tasks</h2>

<form action="/add" method="POST" class="row g-3 mb-4">
  <div class="col-md-6">
    <input type="text" name="content" class="form-control" placeholder="Add a new task..." required>
  </div>
  <div class="col-md-2">
    <select name="priority" class="form-select">
      <option value="Low">Low</option>
      <option value="Medium">Medium</option>
      <option value="High">High</option>
    </select>
  </div>
  <div class="col-md-3">
    <input type="date" name="due_date" class="form-control">
  </div>
  <div class="col-md-1">
    <button type="submit" class="btn btn-primary w-100">Add</button>
  </div>
</form>

<ul class="list-group">
  {% for task in tasks %}
  <li class="list-group-item d-flex justify-content-between align-items-center {% if task.complete %}list-group-item-success{% endif %}">
    <div>
      <strong>{{ task.content }}</strong>
      <span class="badge bg-secondary ms-2">{{ task.priority }}</span>
      {% if task.due_date %}
        <small class="text-muted ms-2">Due: {{ task.due_date }}</small>
      {% endif %}
    </div>
    <div>
      <a href="/complete/{{ task.id }}" class="btn btn-sm btn-outline-success">✔</a>
      <a href="/delete/{{ task.id }}" class="btn btn-sm btn-outline-danger">🗑</a>
    </div>
  </li>
  {% else %}
  <li class="list-group-item">No tasks yet!</li>
  {% endfor %}
</ul>
{% endblock %}
